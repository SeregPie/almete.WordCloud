!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t.almete=t.almete||{},t.almete.WordCloud=n())}(this,function(){"use strict";function t(t,n){if(t.length>0)return n&&(t=t.map(n)),t.reduce(function(t,n){return Math.min(t,n)})}function n(t,n){if(t.length>0)return n&&(t=t.map(n)),t.reduce(function(t,n){return Math.max(t,n)})}function o(t,n,o,i,r){return i+(t-n)*(r-i)/(o-n)}return function(i,r,e,f){void 0===f&&(f={});var a=f.text;void 0===a&&(a="");var u=f.weight;void 0===u&&(u=1);var v=f.rotation;void 0===v&&(v=0);var c=f.fontFamily;void 0===c&&(c="serif");var h=f.fontStyle;void 0===h&&(h="normal");var d=f.fontVariant;void 0===d&&(d="normal");var l=f.fontWeight;void 0===l&&(l="normal");var m,g=f.fontSizeRatio;if(void 0===g&&(g=0),i.length>0&&r>0&&e>0){i=function(t,n,o,i,r,e,f,a){return t.map(function(t){var u=t.text;void 0===u&&(u=n);var v=t.weight;void 0===v&&(v=o);var c=t.rotation;void 0===c&&(c=i);var h=t.fontFamily;void 0===h&&(h=r);var d=t.fontStyle;void 0===d&&(d=e);var l=t.fontVariant;void 0===l&&(l=f);var m=t.fontWeight;return void 0===m&&(m=a),{text:u,weight:v,rotation:c,fontFamily:h,fontStyle:d,fontVariant:l,fontWeight:m}})}(i,a,u,v,c,h,d,l),m=function(t){return-t.weight};var p=function(i,r){var e=t(i,function(t){return t.weight}),f=n(i,function(t){return t.weight});if(e<f&&r>0&&r<1/0)return r<1&&(r=1/r),i.map(function(t){return o(t.weight,e,f,1,r)});if(e>0)return i.map(function(t){return t.weight/e});var a=1+Math.abs(e)+Math.abs(f);return i.map(function(t){return o(t.weight,e,f,1,a)})}(i=i.map(function(t){return[m(t),t]}).sort(function(t,n){var o=t[0],i=n[0];return o>i?1:o<i?-1:0}).map(function(t){return t[1]}),g),w=i.map(function(t,n){var o=t.text,i=(t.weight,t.rotation),r=t.fontFamily;return{text:o,rotation:i,fontStyle:t.fontStyle,fontVariant:t.fontVariant,fontWeight:t.fontWeight,fontSize:p[n],fontFamily:r,left:0,top:0,width:100,height:50}});return function(o,i,r){var e=t(o,function(t){return t.left}),f=n(o,function(t){return t.left+t.width})-e,a=t(o,function(t){return t.top}),u=n(o,function(t){return t.top+t.height})-a,v=Math.min(i/f,r/u);o.forEach(function(t){t.fontSize*=v,t.left*=v,t.top*=v,t.width*=v,t.height*=v})}(w,r,e),function(t,n,o){t.forEach(function(t){t.left+=n/2,t.top+=o/2})}(w,r,e),w}return[]}});
